# Mosquitto MQTT Broker Configuration

# =============================================================================
# General Configuration
# =============================================================================

# User to run mosquitto as (Unix only, comment out for Windows)
# user mosquitto

# Process ID file location (commented out for Windows)
# pid_file /var/run/mosquitto/mosquitto.pid

# =============================================================================
# Listeners
# =============================================================================

# Default MQTT listener on port 1883
listener 1883
protocol mqtt

# WebSocket listener on port 9001
listener 9001
protocol websockets

# =============================================================================
# Security
# =============================================================================

# Allow anonymous connections (set to false for production)
allow_anonymous true

# Password file (uncomment and set password file for authentication)
# password_file /mosquitto/config/passwd

# Access Control List file
# acl_file /mosquitto/config/acl

# =============================================================================
# Persistence
# =============================================================================

# Enable persistence
persistence true

# Persistence location
persistence_location /mosquitto/data/

# Persistence file name
persistence_file mosquitto.db

# Save persistence every N seconds if changes occur
autosave_interval 300

# =============================================================================
# Logging
# =============================================================================

# Log destinations: stdout, stderr, syslog, topic, file
log_dest stdout
log_dest file /mosquitto/log/mosquitto.log

# Log types: error, warning, notice, information, subscribe, unsubscribe, websockets, all
log_type error
log_type warning
log_type notice
log_type information

# Include timestamp in log messages
log_timestamp true

# Log timestamp format
log_timestamp_format %Y-%m-%d %H:%M:%S

# =============================================================================
# Message Settings
# =============================================================================

# Maximum number of QoS 1 and 2 messages to hold in flight per client
max_inflight_messages 20

# Maximum number of QoS 1 and 2 messages to hold in queue per client
max_queued_messages 1000

# Maximum packet size (bytes)
max_packet_size 1024

# =============================================================================
# Connection Settings
# =============================================================================

# Maximum number of client connections (-1 = unlimited)
max_connections -1

# Time in seconds to wait before disconnecting idle clients (0 = disabled)
# connection_messages true
